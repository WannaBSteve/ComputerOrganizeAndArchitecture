# 第三章：计算机功能和互联的顶层视图  

## 一、计算机的功能  
计算机完成的基本功能是**执行程序**，程序的执行便是*重复取指令和执行指令*的过程  

#### 处理器解释指令并执行要求操作，有4类操作  
- cpu-内存
- cpu-I/O  
- 数据处理（算术逻辑操作）  
- 控制  

#### 列出并简要定义指令执行的可能状态
- 指令地址计算（iac）：决定下一条将要执行的指令的地址，通常是将一个固定的值与前一个指令的地址相加。
- 读取指令（if）：将指令从存储器单元读入处理器。
- 指令操作译码（iod）：分析指令，以决定将执行何种操作以及将使用的操作数。
- 操作数地址计算（oac）：如果该指令包括对存储器或通过I/O的操作数访问，决定操作数的地址。
- 取操作数（of）：从存储器或I/O中读取操作数。
- 数据操作（do）：完成指令的操作。
- 存储操作数（os）：将结果写入存储器或输出到I/O。 

## 二、中断  
几乎所有计算机都提供此机制——（I/O或存储器通过它中断处理器的正常处理）  
当外部设备准备好接收服务，外部设备的I/O模块发送**中断请求信号**给处理器，处理器挂起当前程序的操作，跳转服务与某个特定的I/O设备的程序来响应，这个程序即为**中断处理程序**  
为了适应中断，将**中断周期**加入指令周期种  

 ### 多重中断  
  > eg.打印机被完成一次打印操作便会产生一次中断    

   处理办法  
   - 在中断处理过程中禁止其它中断（顺序中断处理）  
     -  容易丢失数据，且没有考虑到优先级   
  
     ![顺序中断](./%E9%A1%BA%E5%BA%8F%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86.png)  
   - 定义中断的优先级，且允许优先级高的中断引起中断处理程序本身被中断（嵌套中断处理）  
  
     ![嵌套中断](./%E5%B5%8C%E5%A5%97%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86.png)  

## 三、互联结构  

--- 
- When the processor detects an interrupt, hardware poll(硬件轮询) 
branches to an interrupt-service routine whose job is to poll each I/O 
module to determine which module caused(引起) the interrupt  
错误。硬件轮询不是分支到中断处理程序去判断谁发起中断，硬件轮询
就是要确定谁发起中断